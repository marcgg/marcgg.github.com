<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <title> Generate Sounds Programmatically With Javascript </title> <meta name="description" content="The Web Audio API is a great option to create notes and music using pure javascript. In this simple tutorial article I'll explain how to get a clearer sound and add some very simple audio effects to a note."> <meta name="author" content="Marc G Gauthier"> <meta content='user-scalable=no, width=device-width, initial-scale=1.0' name='viewport'> <meta name="google-site-verification" content="x2EpQdOMz-k9fP8hak9I3COaXhnQ4jNLp2GU4GYQ8jM" /> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:site" content="@marcgg"> <meta name="twitter:creator" content="@marcgg"> <meta name="twitter:title" content="Generate Sounds Programmatically With Javascript"> <meta name="twitter:description" content="The Web Audio API is a great option to create notes and music using pure javascript. In this simple tutorial article I'll explain how to get a clearer sound and add some very simple audio effects to a note."> <meta name="twitter:image" content="https://marcgg.com/assets/previews/2016-11-01-javascript-audio.jpg" /> <meta name="image" property="og:image" content="https://marcgg.com/assets/previews/2016-11-01-javascript-audio.jpg" /> <link href='//fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic|Open+Sans:300italic,700italic,400,700,300' rel='stylesheet' type='text/css'> <link href="/atom.xml" rel="alternate" type="application/atom+xml" title="Marcgg#Blog"> <link rel="shortcut icon" href="/assets/favicon.png"> <style type="text/css"> /* http://meyerweb.com/eric/tools/css/reset/ v2.0 | 20110126 License: none (public domain) */ html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video { margin: 0; padding: 0; border: 0; font-size: 100%; font: inherit; vertical-align: baseline; } /* HTML5 display-role reset for older browsers */ article, aside, details, figcaption, figure, footer, header, hgroup, menu, nav, section { display: block; } body { line-height: 1; } ol, ul { list-style: none; } blockquote, q { quotes: none; } blockquote:before, blockquote:after, q:before, q:after { content: ''; content: none; } table { border-collapse: collapse; border-spacing: 0; } .clearfix:after { content: "."; display: block; clear: both; visibility: hidden; line-height: 0; height: 0; } .clearfix { display: inline-block; } html[xmlns] .clearfix { display: block; } * html .clearfix { height: 1%; } @font-face { font-family: 'anonymousregular'; src: url('/assets/fonts/Anonymous-webfont.eot'); src: url('/assets/fonts/Anonymous-webfont.eot?#iefix') format('embedded-opentype'), url('/assets/fonts/Anonymous-webfont.woff') format('woff'), url('/assets/fonts/Anonymous-webfont.ttf') format('truetype'), url('/assets/fonts/Anonymous-webfont.svg#anonymousregular') format('svg'); font-weight: normal; font-style: normal; } body{ font-size: 15px; font-family: 'Droid Serif', serif; color: #353535; line-height: 25px; } #gradient{ height: 5px; background: rgba(237,82,82,0.64); background: -moz-linear-gradient(left, rgba(237,82,82,0.64) 0%, rgba(250,21,0,0.65) 20%, rgba(237,82,82,0.66) 52%, rgba(255,21,0,0.66) 80%, rgba(237,82,82,0.67) 100%); background: -webkit-gradient(left top, right top, color-stop(0%, rgba(237,82,82,0.64)), color-stop(20%, rgba(250,21,0,0.65)), color-stop(52%, rgba(237,82,82,0.66)), color-stop(80%, rgba(255,21,0,0.66)), color-stop(100%, rgba(237,82,82,0.67))); background: -webkit-linear-gradient(left, rgba(237,82,82,0.64) 0%, rgba(250,21,0,0.65) 20%, rgba(237,82,82,0.66) 52%, rgba(255,21,0,0.66) 80%, rgba(237,82,82,0.67) 100%); background: -o-linear-gradient(left, rgba(237,82,82,0.64) 0%, rgba(250,21,0,0.65) 20%, rgba(237,82,82,0.66) 52%, rgba(255,21,0,0.66) 80%, rgba(237,82,82,0.67) 100%); background: -ms-linear-gradient(left, rgba(237,82,82,0.64) 0%, rgba(250,21,0,0.65) 20%, rgba(237,82,82,0.66) 52%, rgba(255,21,0,0.66) 80%, rgba(237,82,82,0.67) 100%); background: linear-gradient(to right, rgba(237,82,82,0.64) 0%, rgba(250,21,0,0.65) 20%, rgba(237,82,82,0.66) 52%, rgba(255,21,0,0.66) 80%, rgba(237,82,82,0.67) 100%); filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ed5252', endColorstr='#ed5252', GradientType=1 ); } /* STRUCTURE */ #container{ background-color: #fafafa; } #content{ width: 760px; margin: auto; margin-top: 40px; padding-bottom: 60px; padding-top: 40px; } /* FOOTER */ footer{ padding: 40px 0px; text-align: center; border-top: 1px solid #e6e6e6; font-size: 0.8em; color: #9a9a9a; background-color: #fafafa; } footer a{ color: #9a9a9a; } /* HEADER */ header{ width: 760px; margin: auto; height: 50px; border-bottom: 1px solid #f1f1f1; position: relative; } #more-nav{ font-size: 0.75em; display: inline-block; position: absolute; top: 0px; font-family: "anonymousregular"; padding-top: 5px; right: 0px; } #more-nav a{ padding: 0px 2px; text-decoration: none; color: #353535; } #more-nav a:hover{ transition: 0s; background-image: linear-gradient(to bottom, #fff 30%, rgba(200, 200, 200, 0.4) 50%); background-repeat: repeat-x; background-size: 2px 2px; background-position: 0px 100%; } #more-nav .selected{ color: #ed5252; font-weight: bold; } #logo{ font-size: 1.2em; font-family: "anonymousregular"; margin-top: 20px; } #logo *{ text-decoration: none; } #logo1{ color: #999; } #logo2{ font-size: 0.8em; color: #ed5252; } #logo3{ color: #353535; } #logo a:hover{ color: #ed5252; transition-duration: 1s; } /* TEXT STRUCTURE */ h1, h2, h3, h4, h5{ font-family: 'Open Sans', sans-serif; color: #1c1c1c; } a:hover{ color: #ed5252; transition-duration:0.2s; } p a, ul a, .review a{ color: #763232; text-decoration: none; background-image: linear-gradient(to bottom, #fff 30%, rgba(200, 200, 200, 0.4) 50%); background-repeat: repeat-x; background-size: 2px 2px; background-position: 0px 100%; } .homepage a{ color: #353535; } p{ text-align: justify; margin-bottom: 20px; } .excerpt p{ margin-bottom: 0px; } .footnote, .sidenote{ margin: 40px 0px; color: #858585; text-align: right; font-size: 0.9em; font-style: italic; } .image_notes{ text-align: center; color: #858585; font-size: 0.9em; margin: -5px 0px 15px 0px; } h1{ font-size: 2.45em; text-align: center; margin: 70px 0px 20px 0px; line-height : 1.5em; } h1 em{ color: #888; font-weight: normal; font-size: 0.8em; } h2{ font-size: 1.75em; margin: 50px 0px 50px 0px; line-height: 1.75em; } h2::before{ content: "#"; color: #ed5252; font-family: "anonymousregular"; display: inline-block; float: left; padding: 3px 10px 0px 0px; font-size: 0.7em; } h3{ font-size: 1.35em; margin-bottom: 20px; } h4{ font-size: 1.2em; margin-bottom: 20px; font-style: italic; } h5{ font-size: 1.3em; margin-bottom: 20px; } h5 *{ color: #353535; } em{ font-style: italic; } strong{ font-weight: bold; } blockquote{ border-left: 3px solid #ddd; color: #888; margin: 0px 0px 20px 40px; font-style: italic; } blockquote p{ margin: 5px 20px !important; } ul{ padding-left: 40px; line-height: 25px; list-style: square; margin-bottom: 20px; } li{ display: list-item; } ol{ padding-left: 40px; line-height: 25px; margin-bottom: 20px; list-style-type: decimal; } /* TAGS */ .home-tag { font-size: 10px; display: inline-block; border: 1px solid #dedede; padding: 2px 2px 1px 2px; border-radius: 2px; line-height: 10px; margin-left: 1px; } .tag-date{ color: #aaa; } .tag-management { border-color: #929aff; color: #929aff; } .tag-programming { border-color: #ff9292; color: #ff9292; } .tag-coaching { border-color: #4ec698; color: #4ec698; } .tag-projectmanagement { border-color: #929aff; color: #929aff; } /* BLOG INDEX */ #all-posts{ margin: 0px auto 10px auto; width: 760px; } .single-post{ border-top: 1px solid #f1f1f1; padding: 40px 0px; float: clear; } .single-post:first-child{ border-top: none !important; } .single-post .date{ color: #cdcdcd; margin-top: 10px; float: right; } .single-post .author{ color: #cdcdcd; float: right; font-size: 0.7em; } .single-post .title{ font-family: 'Open Sans', sans-serif; font-size: 1.6em; margin-bottom: 20px; line-height: 1.6em; position: relative; } .single-post .title a{ color: #353535; text-decoration: none; } .single-post .title a::before{ content: "→"; opacity: 0; font-family: "anonymousregular"; font-size: 0.7em; position: absolute; left: -30px; transition: all .4s ease-in-out; } .single-post .title a:hover::before{ opacity: 1; transition: all .4s ease-in-out; color: #ed5252; } .single-post .title em{ display: none; } .data_table{ border: 1px solid #efefef; font-family: "anonymousregular"; font-size: 12px; margin: auto auto 20px auto; } .data_table tr{ border: 1px solid #efefef; } .data_table th{ background-color: #efefef; } .data_table th, .data_table td{ padding: 2px 5px; } .post table { margin: 0px auto 20px auto; border: 1px solid #dedede; } .post td { padding: 5px 10px; } /* BOOKS */ .book-cover-entry{ width: 120px; margin-right: 20px; float: left; font-size: 12px; text-decoration: none !important; } .buy-book{ text-decoration: underline; } .book-cover-entry img{ width: 120px; } .book-cover-entry { background-image: none; } .book-rating .icon { display: inline-block; padding-right: 5px; } .book-rating .top .icon{ color: #1CED00; } .book-rating .good .icon{ color: #82ED00; } .book-rating .medium .icon{ color: #EDD100; } .book-rating .low .icon{ color: #EDAE00; } .book-rating .poor .icon{ color: #ED3B00; } #buy-title{ padding: 0px 0px 25px 0px; } #buy-title span{ font-size: 0.8em !important; color: #cdcdcd; } #buy-popin{ padding: 30px 15px; } .store{ display: block; padding: 15px 5px; text-decoration: none; } .store:hover{ color: #ed5252; } #upcoming-books{ padding-top: 20px; } #upcoming-books img{ height: 90px; margin-right: 10px; border: 1px solid #fff; } #upcoming-books a{ text-decoration: none; } #upcoming-books img:hover{ border: 1px solid #ed5252; } /* BLOG SHOW */ .post{ } p code, li code{ background-color: #efefef; font-family: "Lucida Console", "Courier New", Courier, monospace; padding: 1px 2px; font-size: 13px; } .post img{ border: 1px solid #e6e6e6; padding: 5px; margin: 0px 0px 20px 20px; } .published span{ border-top: 1px solid #e6e6e6; display: inline-block; color: #858585; padding-top: 5px; font-family: 'Open Sans', sans-serif; font-size: 0.9em; padding: 5px 20px 0px 20px; } .published{ text-align: center; margin-bottom: 65px; } #more{ border-top: 1px solid #e6e6e6; margin-top: 40px; padding: 40px 0px; } #more-articles{ margin-bottom: 40px; } .image-wrapper em{ display: block; font-size: 0.8em; margin: -20px 0px 20px 0px; color: #aaa; } .image-wrapper em a{ color: #aaa; } .twitter-tweet{ margin: auto; max-width: 420px !important; } #intro_blurb{ border: 1px dashed #dedede; padding: 20px; margin: 20px 0px; opacity: 0.7; } #intro_blurb a{ color: #763232; } /* Music */ .js_play_sound, .js_stop_sound{ display: inline-block; padding: 4px 10px 2px 10px; border: 1px solid #efefef; background-color: #efefef; margin-right: 10px; text-decoration: none; border-radius: 3px; font-family: 'anonymousregular'; font-size: 12px; } .js_play_sound:hover, .js_stop_sound:hover{ background-color: #dedede; } /* Comments */ #comments{ padding-top: 20px; } #show-disqus-arrow{ color: #ed5252; } /* CLEARFIX */ .cf:before, .cf:after { content: " "; /* 1 */ display: table; /* 2 */ } .cf:after { clear: both; } /************************ MOBILE LAYOUT *********************/ @media all and (max-width: 800px) { .home-tag { display: none; } .author{ float: none !important; display: inline; } header{ width: 92%; padding: 4%; height: 75px; position: relative; text-align: center; background-color: #fafafa; } #more-nav{ left: 0px; top: 50px; } #logo{ margin-top: 10px; } #content, #all-posts{ width: 92%; padding: 4%; } .image-wrapper{ width: 100%; } .image-wrapper img, .post div img, .post p img{ max-width: 100% !important; padding: 15px 0px !important; margin: 20px 0px 20px 0px !important; border-right: 0px; border-left: 0px; } .single-post .title{ font-size: 1.4em; } .date{ display: none; } h1{ font-size: 1.7em; width: 94%; padding: 3%; } h2{ font-size: 1.50em; margin: 30px 0px 30px 0px; line-height: 1.75em; } h3{ font-size: 1.30em; } blockquote{ margin: 0px 0px 20px 0px !important; } pre{ margin-left: 0px !important; margin-right: 0px !important; width: 90%; overflow-x: scroll; } code{ width: 100%; font-size: 13px !important; } footer div{ display: inline; } /* Hire me responsive */ #hire ul{ padding-left: 15px; } #talking-img{ width: 100%; } #talking-img img{ width: 100% !important; } #reviews{ border-top: 1px dashed #e6e6e6; padding: 15px 0px 15px 0px; } #references_logo{ padding: 0px 0px 15px 0px; } .review{ width: 100%; margin: 0px 0px 15px 0px; padding: 0px; border-bottom: 1px dashed #e6e6e6; } #references_logo img, #references_logo .minor{ width: 22%; float: left; margin: 15px 2% 15px 0px; } .data_table th, .data_table td{ font-size: 8px; padding: 0px; border: 1px solid #efefef; } } /* CONVERSATION */ #post-conversation blockquote{ color: rgb(84, 84, 84); font-style: normal; margin: 20px 40px; } #post-conversation blockquote p{ margin: 10px 20px !important; } #post-conversation blockquote .dpm{ color: #3B9E2E !important; font-family: 'Open Sans', sans-serif; font-size: 13px; } #post-conversation blockquote .ddev{ color: #AD34CF !important; font-family: 'Open Sans', sans-serif; font-size: 13px; } #post-conversation blockquote .dcto{ color: #9E2E2E !important; font-family: 'Open Sans', sans-serif; font-size: 13px; } /* STATUS */ .status { background-color: #fff; padding: 40px; border: 1px solid #dba9a9; border-radius: 5px; margin: 40px 0px; } .status_text_content { font-size: 22px; line-height: 32px; } .status_text_content p { text-align: start !important; } .status_date { } .status_date a { color: #858585; text-decoration: none; } .status_images { margin: 20px auto; text-align: center; } .status_images img { max-width: 85%; max-height: 500px; </style> </head> <body> <div id="gradient"></div> <header> <div id="logo"> <a id='logo1' href="/">marcgg</a> <span id='logo2'>#</span> <a id='logo3' href="/blog/"> blog </a> </div> <div id="more-nav"> &rarr; <a href="/blog/" class="selected">blog</a> &rarr; <a href="/status/" class="">status</a> &rarr; <a href="/books/" class="">books</a> &rarr; <a href="/hire/" class="">hire me</a> </div> </header> <h1> <span> Generate Sounds Programmatically With Javascript </span> </h1> <div class="published"> <span>01 November 2016</span> </div> <div id="container"> <div id="content"> <div class="post" id="post-"> <script src="/assets/js/posts/music.js"></script> <p>During a recent hackathon, I decided to build <a href="/blog/2016/11/21/chiptune-sequencer-multiplayer/">a multiplayer 8 bits sequencer</a> using sounds generated programatically with the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API">Web Audio API</a>. I didn’t want to only use the HTML 5 <code class="language-plaintext highlighter-rouge">audio</code> tag because I found it too limiting… but the first thing I discovered is that getting the right kind of sound is not straightforward at all, especially if you only have a very basic musical background like myself. So how exactly do you create a clear, ringing and nice sounding note?</p> <p>In this article I’ll give some pointers with usable code. I’ve also added examples that you can actually run <a href="http://caniuse.com/#feat=audio-api">if your browser supports it</a>.</p> <h2 id="produce-a-simple-beep">Produce a Simple Beep</h2> <p>First let’s create a very basic beep using a <a href="https://en.wikipedia.org/wiki/Sine_wave">sinusoid</a>. We’ll initiate an <a href="https://developer.mozilla.org/en-US/docs/Web/API/AudioContext">audio context</a>, which is the central object for generating sound. Then we’ll create an <a href="https://developer.mozilla.org/en-US/docs/Web/API/OscillatorNode">oscillator</a> producing the sine wave. Finally we connect the oscillator to the context and start.</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">context</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AudioContext</span><span class="p">()</span>
<span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">createOscillator</span><span class="p">()</span>
<span class="nx">o</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">sine</span><span class="dl">"</span>
<span class="nx">o</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nx">destination</span><span class="p">)</span>
<span class="nx">o</span><span class="p">.</span><span class="nx">start</span><span class="p">()</span></code></pre></figure> <p><a href="#" class="js_play_sound" data-source="example1()">Play</a> <a href="#" class="js_stop_sound">Stop</a></p> <p>You’ll notice that the sound produced here is not great. It seems like you let a phone off the hook and when you stop it, you hear a “click” and it’s not pleasant at all. This is because the human hear reacts this way as explained in this <a href="http://alemangui.github.io/blog//2015/12/26/ramp-to-value.html">great article</a>. Basically when you stop the sound anywhere else than the zero crossing point, you’ll hear this clicking sound.</p> <div class="image-wrapper" style="text-align: center"><img src="/assets/blog/audio_click.jpg" alt="Clicking noise on a sine curve" style="padding: 20px; width: 600px;" /></div> <h2 id="getting-rid-of-the-clicking-sound">Getting Rid Of The Clicking Sound</h2> <p>The best solution to get rid of this click is to ramp the sine wave down with an exponentional function, using <code class="language-plaintext highlighter-rouge">AudioParam.exponentialRampToValueAtTime()</code> as <a href="https://developer.mozilla.org/en-US/docs/Web/API/AudioParam/exponentialRampToValueAtTime">documented here</a>.</p> <p>This time we need to add a <a href="https://developer.mozilla.org/en-US/docs/Web/API/GainNode">gain node</a> to our oscillator. A gain node allows us to change the volume of a signal as explained in this schema from the documentation:</p> <div class="image-wrapper" style="text-align: center"><img src="/assets/blog/gain.jpg" alt="Gain node" style="padding: 20px; width: 600px;" /></div> <p>The code to start the sound now looks like this:</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">context</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AudioContext</span><span class="p">()</span>
<span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">createOscillator</span><span class="p">()</span>
<span class="kd">var</span>  <span class="nx">g</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">createGain</span><span class="p">()</span>
<span class="nx">o</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">g</span><span class="p">)</span>
<span class="nx">g</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nx">destination</span><span class="p">)</span>
<span class="nx">o</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span></code></pre></figure> <p><a href="#" class="js_play_sound" data-source="example2()">Play</a></p> <p>In order to stop the sound we change the gain value, effectively reducing the volume. Note that we don’t ramp down to 0 since there is a limitation in this function where the value has to be positive.</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">g</span><span class="p">.</span><span class="nx">gain</span><span class="p">.</span><span class="nx">exponentialRampToValueAtTime</span><span class="p">(</span>
  <span class="mf">0.00001</span><span class="p">,</span> <span class="nx">context</span><span class="p">.</span><span class="nx">currentTime</span> <span class="o">+</span> <span class="mf">0.04</span>
<span class="p">)</span></code></pre></figure> <p><a href="#" class="js_play_sound" data-source="example2Stop(0.04)">Stop</a></p> <p>As you can hear, the clicking sound is gone! But that’s not the only interesting thing that you can do with this exponential ramp down.</p> <h2 id="set-a-ringing-effect">Set A Ringing Effect</h2> <p>In the example above, we decided to stop the sound really quickly, in <code class="language-plaintext highlighter-rouge">0.04</code> seconds. But what happens when we change this <code class="language-plaintext highlighter-rouge">X</code> value?</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">g</span><span class="p">.</span><span class="nx">gain</span><span class="p">.</span><span class="nx">exponentialRampToValueAtTime</span><span class="p">(</span><span class="mf">0.00001</span><span class="p">,</span> <span class="nx">context</span><span class="p">.</span><span class="nx">currentTime</span> <span class="o">+</span> <span class="nx">X</span><span class="p">)</span></code></pre></figure> <p><a href="#" class="js_play_sound" data-source="example2()">Play</a> <a href="#" class="js_play_sound" data-source="example2Stop(0.1)">Stop (X=0.1)</a> <a href="#" class="js_play_sound" data-source="example2Stop(1)">Stop (X=1)</a> <a href="#" class="js_play_sound" data-source="example2Stop(5)">Stop (X=5)</a></p> <h3 id="hitting-notes">Hitting Notes</h3> <p>Giving more time to the sound to fade out gives it a totally different feel. It gets more visible when we start and stop the signal right away:</p> <p><a href="#" class="js_play_sound" data-source="example3('sine', 0.08)">Start and stop quickly</a> <a href="#" class="js_play_sound" data-source="example3('sine', 1.5)">Start and stop slowly</a></p> <p>The first one sounds like a ticking noise when the other sounds like an actual note played on an instrument.</p> <h3 id="various-oscilators">Various Oscilators</h3> <p>So far we’ve been using a sine wave for our main signal, but we have other options:</p> <div class="image-wrapper" style="text-align: center"><img src="/assets/blog/signals.png" alt="Types of oscilators" style="padding: 20px; width: 400px;" /></div> <p>It’s enven more interesting when we start playing around with the type of oscilators by setting <code class="language-plaintext highlighter-rouge">o.type = type</code>.</p> <p><a href="#" class="js_play_sound" data-source="example3('sine', 1.5)">Sine</a> <a href="#" class="js_play_sound" data-source="example3('square', 1.5)">Square</a> <a href="#" class="js_play_sound" data-source="example3('triangle', 1.5)">Triangle</a> <a href="#" class="js_play_sound" data-source="example3('sawtooth', 1.5)">Sawtooth</a></p> <h2 id="playing-actual-notes">Playing Actual Notes</h2> <p>With the previous code, it becomes fairly simple to have a nice sounding note, but what exactly were we playing? That’s when you have to take frequency into account. For instance, the one people know is that A4 is 440Hz, but there are others.</p> <h3 id="note-frequencies-in-hz">Note Frequencies in Hz</h3> <p>With this table, you can easily create a mapping in your code to play any given note using its . For the hackathon I used a simple hash mapping that is available in this <a href="https://gist.github.com/marcgg/94e97def0e8694f906443ed5262e9cbb">gist</a>.</p> <table class="data_table"> <tr> <td></td><th>C</th><th>C#</th><th>D</th><th>Eb</th><th>E</th><th>F</th><th>F#</th><th>G</th><th>G#</th><th>A</th><th>Bb</th><th>B</th> </tr> <tr> <th>0</th><td>16.35</td><td>17.32</td><td>18.35</td><td>19.45</td><td>20.60</td><td>21.83</td><td>23.12</td><td>24.50</td><td>25.96</td><td>27.50</td><td>29.14</td><td>30.87</td> </tr> <tr> <th>1</th><td>32.70</td><td>34.65</td><td>36.71</td><td>38.89</td><td>41.20</td><td>43.65</td><td>46.25</td><td>49.00</td><td>51.91</td><td>55.00</td><td>58.27</td><td>61.74</td> </tr> <tr> <th>2</th><td>65.41</td><td>69.30</td><td>73.42</td><td>77.78</td><td>82.41</td><td>87.31</td><td>92.50</td><td>98.00</td><td>103.8</td><td>110.0</td><td>116.5</td><td>123.5</td> </tr> <tr> <th>3</th><td>130.8</td><td>138.6</td><td>146.8</td><td>155.6</td><td>164.8</td><td>174.6</td><td>185.0</td><td>196.0</td><td>207.7</td><td>220.0</td><td>233.1</td><td>246.9</td> </tr> <tr> <th>4</th><td>261.6</td><td>277.2</td><td>293.7</td><td>311.1</td><td>329.6</td><td>349.2</td><td>370.0</td><td>392.0</td><td>415.3</td><td>440.0</td><td>466.2</td><td>493.9</td> </tr> <tr> <th>5</th><td>523.3</td><td>554.4</td><td>587.3</td><td>622.3</td><td>659.3</td><td>698.5</td><td>740.0</td><td>784.0</td><td>830.6</td><td>880.0</td><td>932.3</td><td>987.8</td> </tr> <tr> <th>6</th><td>1047</td><td>1109</td><td>1175</td><td>1245</td><td>1319</td><td>1397</td><td>1480</td><td>1568</td><td>1661</td><td>1760</td><td>1865</td><td>1976</td> </tr> <tr> <th>7</th><td>2093</td><td>2217</td><td>2349</td><td>2489</td><td>2637</td><td>2794</td><td>2960</td><td>3136</td><td>3322</td><td>3520</td><td>3729</td><td>3951</td> </tr> <tr> <th>8</th><td>4186</td><td>4435</td><td>4699</td><td>4978</td><td>5274</td><td>5588</td><td>5920</td><td>6272</td><td>6645</td><td>7040</td><td>7459</td><td>7902</td> </tr> </table> <p>To implement this, we just need to add a frequency to our oscilator:</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">frequency</span> <span class="o">=</span> <span class="mf">440.0</span>
<span class="nx">o</span><span class="p">.</span><span class="nx">frequency</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">frequency</span></code></pre></figure> <p>If we change with the value of <code class="language-plaintext highlighter-rouge">frequency</code>, we can play any note. For instance:</p> <p><a href="#" class="js_play_sound" data-source="example4(261.6, 'sine')">261.6Hz (C4)</a> <a href="#" class="js_play_sound" data-source="example4(440.0, 'sine')">440Hz (A4)</a> <a href="#" class="js_play_sound" data-source="example4(830.6, 'sine')">830.6Hz (G#5)</a></p> <p>Mix this with the ramp down timings and different signals, and you start to be able to create more interesting sounds.</p> <p><a href="#" class="js_play_sound" data-source="example4(261.6, 'square')">174.6Hz (F3) - Square</a> <a href="#" class="js_play_sound" data-source="example4(1109, 'sawtooth')">1109Hz (C#6) - Sawtooth</a> <a href="#" class="js_play_sound" data-source="example4(87.31, 'triangle')">87.31 Hz (F2) - Triangle</a></p> <div id="more"> <div id="more-articles"> <p>Since you scrolled this far, you might be interested in some other things I wrote:</p> <ul> <li><a href="/blog/2016/11/21/chiptune-sequencer-multiplayer/">Building A Multiplayer 8 Bits Sequencer</a></li> <li><a href="/blog/2016/03/14/github-pages-jekyll/">Trailing Slashes, Github Pages, Jekyll 3 & 404s</a></li> <li><a href="/blog/2016/03/01/vimrc-example/">Vim Configuration From Scratch in 2016</a></li> <li><a href="/blog/2015/01/05/css-animations-failing-capybara-specs/">How CSS Animations Can Break Your Tests</a></li> <li><a href="/blog/2014/07/22/in-defense-of-legacy-code/">Some Respect For Legacy Code</a></li> <li><a href="/blog/2014/04/28/frame-based-layout-bad-code/">Tips on Creating a Website From When I Was 12</a></li> <li><a href="/blog/2013/11/05/enough-with-the-language-trolls/">Enough With The Trolls</a></li> <li><a href="/blog/2013/03/25/please-changelog-open-source/">Please Keep a Changelog For Your Open Source Lib</a></li> <li><a href="/blog/2012/09/04/one-reason-to-switch-to-vim-editor/">The One Thing That Made Me Switch To Vim</a></li> <li><a href="/books/">Startup & Tech Book Reviews</a> </ul> </div> <div class="container comments" id="comments"> Loading comments... </div> <div id="comment_form_wrapper" class="container"> <form id="comment_form"> <textarea name="content" required id="comment_content" placeholder="Leave a comment"/></textarea /> <div id="comment_additional" class="row" style="display: none;"> <div class="col-sm-4"> <input type="text" id="comment_name" required placeholder="Your name*" /> </div> <div class="col-sm-4"> <input type="text" id="comment_website" placeholder="Your site" /> </div> <div class="col-sm-4"> <input type="email" id="comment_email" required placeholder="Your email* (won't be displayed)" /> </div> </div> <br /> <input type="submit" id="submit_comment" value="Send"/> <div id="submit_loading" style="display: none;">...</div> </form> </div> </div> </div> </div> </div> <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script> <script src="/assets/js/comments.js"></script> <link rel="preload" href="/assets/css/code.css" as="style" onload="this.rel='stylesheet'"> <link href="/assets/css/comments.css?body=1" rel="stylesheet" type="text/css" media="all"> <script> /*! loadCSS. [c]2017 Filament Group, Inc. MIT License */ !function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this); /*! loadCSS rel=preload polyfill. [c]2017 Filament Group, Inc. MIT License */ !function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this); </script> <footer> <div>Website powered by <a href="https://github.com/jekyll/jekyll">Jekyll</a>, hosted on <a href="https://github.com/marcgg/marcgg.github.com">Github</a>. <br> All of the <a href="/blog">blog's articles</a>, <a href="/status">status</a> and site content in general is under Copyright &copy;. <br> If you want to use this content, please contact me.</div> </footer> <script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-31071519-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script> </body> </html>

