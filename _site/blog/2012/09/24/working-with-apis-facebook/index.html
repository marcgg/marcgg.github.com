<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <title> The Risks of Working With Another Company's API </title> <meta name="description" content="A point of view and advices to people wanting to build on top of an existing platform such as Facebook or Twitter."> <meta name="author" content="Marc G Gauthier"> <meta content='user-scalable=no, width=device-width, initial-scale=1.0' name='viewport'> <meta name="google-site-verification" content="x2EpQdOMz-k9fP8hak9I3COaXhnQ4jNLp2GU4GYQ8jM" /> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:site" content="@marcgg"> <meta name="twitter:creator" content="@marcgg"> <meta name="twitter:title" content="The Risks of Working With Another Company's API"> <meta name="twitter:description" content="A point of view and advices to people wanting to build on top of an existing platform such as Facebook or Twitter."> <meta name="twitter:image" content="https://marcgg.com/assets/previews/2012-9-24-working-with-apis-facebook.jpg" /> <meta name="image" property="og:image" content="https://marcgg.com/assets/previews/2012-9-24-working-with-apis-facebook.jpg" /> <link href='//fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic|Open+Sans:300italic,700italic,400,700,300' rel='stylesheet' type='text/css'> <link href="/atom.xml" rel="alternate" type="application/atom+xml" title="Marcgg#Blog"> <link rel="shortcut icon" href="/assets/favicon.png"> <style type="text/css"> /* http://meyerweb.com/eric/tools/css/reset/ v2.0 | 20110126 License: none (public domain) */ html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video { margin: 0; padding: 0; border: 0; font-size: 100%; font: inherit; vertical-align: baseline; } /* HTML5 display-role reset for older browsers */ article, aside, details, figcaption, figure, footer, header, hgroup, menu, nav, section { display: block; } body { line-height: 1; } ol, ul { list-style: none; } blockquote, q { quotes: none; } blockquote:before, blockquote:after, q:before, q:after { content: ''; content: none; } table { border-collapse: collapse; border-spacing: 0; } .clearfix:after { content: "."; display: block; clear: both; visibility: hidden; line-height: 0; height: 0; } .clearfix { display: inline-block; } html[xmlns] .clearfix { display: block; } * html .clearfix { height: 1%; } @font-face { font-family: 'anonymousregular'; src: url('/assets/fonts/Anonymous-webfont.eot'); src: url('/assets/fonts/Anonymous-webfont.eot?#iefix') format('embedded-opentype'), url('/assets/fonts/Anonymous-webfont.woff') format('woff'), url('/assets/fonts/Anonymous-webfont.ttf') format('truetype'), url('/assets/fonts/Anonymous-webfont.svg#anonymousregular') format('svg'); font-weight: normal; font-style: normal; } body{ font-size: 15px; font-family: 'Droid Serif', serif; color: #353535; line-height: 25px; } #gradient{ height: 5px; background: rgba(237,82,82,0.64); background: -moz-linear-gradient(left, rgba(237,82,82,0.64) 0%, rgba(250,21,0,0.65) 20%, rgba(237,82,82,0.66) 52%, rgba(255,21,0,0.66) 80%, rgba(237,82,82,0.67) 100%); background: -webkit-gradient(left top, right top, color-stop(0%, rgba(237,82,82,0.64)), color-stop(20%, rgba(250,21,0,0.65)), color-stop(52%, rgba(237,82,82,0.66)), color-stop(80%, rgba(255,21,0,0.66)), color-stop(100%, rgba(237,82,82,0.67))); background: -webkit-linear-gradient(left, rgba(237,82,82,0.64) 0%, rgba(250,21,0,0.65) 20%, rgba(237,82,82,0.66) 52%, rgba(255,21,0,0.66) 80%, rgba(237,82,82,0.67) 100%); background: -o-linear-gradient(left, rgba(237,82,82,0.64) 0%, rgba(250,21,0,0.65) 20%, rgba(237,82,82,0.66) 52%, rgba(255,21,0,0.66) 80%, rgba(237,82,82,0.67) 100%); background: -ms-linear-gradient(left, rgba(237,82,82,0.64) 0%, rgba(250,21,0,0.65) 20%, rgba(237,82,82,0.66) 52%, rgba(255,21,0,0.66) 80%, rgba(237,82,82,0.67) 100%); background: linear-gradient(to right, rgba(237,82,82,0.64) 0%, rgba(250,21,0,0.65) 20%, rgba(237,82,82,0.66) 52%, rgba(255,21,0,0.66) 80%, rgba(237,82,82,0.67) 100%); filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ed5252', endColorstr='#ed5252', GradientType=1 ); } /* STRUCTURE */ #container{ background-color: #fafafa; } #content{ width: 760px; margin: auto; margin-top: 40px; padding-bottom: 60px; padding-top: 40px; } /* FOOTER */ footer{ padding: 40px 0px; text-align: center; border-top: 1px solid #e6e6e6; font-size: 0.8em; color: #9a9a9a; background-color: #fafafa; } footer a{ color: #9a9a9a; } /* HEADER */ header{ width: 760px; margin: auto; height: 50px; border-bottom: 1px solid #f1f1f1; position: relative; } #more-nav{ font-size: 0.75em; display: inline-block; position: absolute; top: 0px; font-family: "anonymousregular"; padding-top: 5px; right: 0px; } #more-nav a{ padding: 0px 2px; text-decoration: none; color: #353535; } #more-nav a:hover{ transition: 0s; background-image: linear-gradient(to bottom, #fff 30%, rgba(200, 200, 200, 0.4) 50%); background-repeat: repeat-x; background-size: 2px 2px; background-position: 0px 100%; } #more-nav .selected{ color: #ed5252; font-weight: bold; } #logo{ font-size: 1.2em; font-family: "anonymousregular"; margin-top: 20px; } #logo *{ text-decoration: none; } #logo1{ color: #999; } #logo2{ font-size: 0.8em; color: #ed5252; } #logo3{ color: #353535; } #logo a:hover{ color: #ed5252; transition-duration: 1s; } /* TEXT STRUCTURE */ h1, h2, h3, h4, h5{ font-family: 'Open Sans', sans-serif; color: #1c1c1c; } a:hover{ color: #ed5252; transition-duration:0.2s; } p a, ul a, .review a{ color: #763232; text-decoration: none; background-image: linear-gradient(to bottom, #fff 30%, rgba(200, 200, 200, 0.4) 50%); background-repeat: repeat-x; background-size: 2px 2px; background-position: 0px 100%; } .homepage a{ color: #353535; } p{ text-align: justify; margin-bottom: 20px; } .excerpt p{ margin-bottom: 0px; } .footnote, .sidenote{ margin: 40px 0px; color: #858585; text-align: right; font-size: 0.9em; font-style: italic; } .image_notes{ text-align: center; color: #858585; font-size: 0.9em; margin: -5px 0px 15px 0px; } h1{ font-size: 2.45em; text-align: center; margin: 70px 0px 20px 0px; line-height : 1.5em; } h1 em{ color: #888; font-weight: normal; font-size: 0.8em; } h2{ font-size: 1.75em; margin: 50px 0px 50px 0px; line-height: 1.75em; } h2::before{ content: "#"; color: #ed5252; font-family: "anonymousregular"; display: inline-block; float: left; padding: 3px 10px 0px 0px; font-size: 0.7em; } h3{ font-size: 1.35em; margin-bottom: 20px; } h4{ font-size: 1.2em; margin-bottom: 20px; font-style: italic; } h5{ font-size: 1.3em; margin-bottom: 20px; } h5 *{ color: #353535; } em{ font-style: italic; } strong{ font-weight: bold; } blockquote{ border-left: 3px solid #ddd; color: #888; margin: 0px 0px 20px 40px; font-style: italic; } blockquote p{ margin: 5px 20px !important; } ul{ padding-left: 40px; line-height: 25px; list-style: square; margin-bottom: 20px; } li{ display: list-item; } ol{ padding-left: 40px; line-height: 25px; margin-bottom: 20px; list-style-type: decimal; } /* TAGS */ .home-tag { font-size: 10px; display: inline-block; border: 1px solid #dedede; padding: 2px 2px 1px 2px; border-radius: 2px; line-height: 10px; margin-left: 1px; } .tag-date{ color: #aaa; } .tag-management { border-color: #929aff; color: #929aff; } .tag-programming { border-color: #ff9292; color: #ff9292; } .tag-coaching { border-color: #4ec698; color: #4ec698; } .tag-projectmanagement { border-color: #929aff; color: #929aff; } /* BLOG INDEX */ #all-posts{ margin: 0px auto 10px auto; width: 760px; } .single-post{ border-top: 1px solid #f1f1f1; padding: 40px 0px; float: clear; } .single-post:first-child{ border-top: none !important; } .single-post .date{ color: #cdcdcd; margin-top: 10px; float: right; } .single-post .author{ color: #cdcdcd; float: right; font-size: 0.7em; } .single-post .title{ font-family: 'Open Sans', sans-serif; font-size: 1.6em; margin-bottom: 20px; line-height: 1.6em; position: relative; } .single-post .title a{ color: #353535; text-decoration: none; } .single-post .title a::before{ content: "â†’"; opacity: 0; font-family: "anonymousregular"; font-size: 0.7em; position: absolute; left: -30px; transition: all .4s ease-in-out; } .single-post .title a:hover::before{ opacity: 1; transition: all .4s ease-in-out; color: #ed5252; } .single-post .title em{ display: none; } .data_table{ border: 1px solid #efefef; font-family: "anonymousregular"; font-size: 12px; margin: auto auto 20px auto; } .data_table tr{ border: 1px solid #efefef; } .data_table th{ background-color: #efefef; } .data_table th, .data_table td{ padding: 2px 5px; } .post table { margin: 0px auto 20px auto; border: 1px solid #dedede; } .post td { padding: 5px 10px; } /* BOOKS */ .book-cover-entry{ width: 120px; margin-right: 20px; float: left; font-size: 12px; text-decoration: none !important; } .buy-book{ text-decoration: underline; } .book-cover-entry img{ width: 120px; } .book-cover-entry { background-image: none; } .book-rating .icon { display: inline-block; padding-right: 5px; } .book-rating .top .icon{ color: #1CED00; } .book-rating .good .icon{ color: #82ED00; } .book-rating .medium .icon{ color: #EDD100; } .book-rating .low .icon{ color: #EDAE00; } .book-rating .poor .icon{ color: #ED3B00; } #buy-title{ padding: 0px 0px 25px 0px; } #buy-title span{ font-size: 0.8em !important; color: #cdcdcd; } #buy-popin{ padding: 30px 15px; } .store{ display: block; padding: 15px 5px; text-decoration: none; } .store:hover{ color: #ed5252; } #upcoming-books{ padding-top: 20px; } #upcoming-books img{ height: 90px; margin-right: 10px; border: 1px solid #fff; } #upcoming-books a{ text-decoration: none; } #upcoming-books img:hover{ border: 1px solid #ed5252; } /* BLOG SHOW */ .post{ } p code, li code{ background-color: #efefef; font-family: "Lucida Console", "Courier New", Courier, monospace; padding: 1px 2px; font-size: 13px; } .post img{ border: 1px solid #e6e6e6; padding: 5px; margin: 0px 0px 20px 20px; } .published span{ border-top: 1px solid #e6e6e6; display: inline-block; color: #858585; padding-top: 5px; font-family: 'Open Sans', sans-serif; font-size: 0.9em; padding: 5px 20px 0px 20px; } .published{ text-align: center; margin-bottom: 65px; } #more{ border-top: 1px solid #e6e6e6; margin-top: 40px; padding: 40px 0px; } #more-articles{ margin-bottom: 40px; } .image-wrapper em{ display: block; font-size: 0.8em; margin: -20px 0px 20px 0px; color: #aaa; } .image-wrapper em a{ color: #aaa; } .twitter-tweet{ margin: auto; max-width: 420px !important; } #intro_blurb{ border: 1px dashed #dedede; padding: 20px; margin: 20px 0px; opacity: 0.7; } #intro_blurb a{ color: #763232; } /* Music */ .js_play_sound, .js_stop_sound{ display: inline-block; padding: 4px 10px 2px 10px; border: 1px solid #efefef; background-color: #efefef; margin-right: 10px; text-decoration: none; border-radius: 3px; font-family: 'anonymousregular'; font-size: 12px; } .js_play_sound:hover, .js_stop_sound:hover{ background-color: #dedede; } /* Comments */ #comments{ padding-top: 20px; } #show-disqus-arrow{ color: #ed5252; } /* CLEARFIX */ .cf:before, .cf:after { content: " "; /* 1 */ display: table; /* 2 */ } .cf:after { clear: both; } /************************ MOBILE LAYOUT *********************/ @media all and (max-width: 800px) { .home-tag { display: none; } .author{ float: none !important; display: inline; } header{ width: 92%; padding: 4%; height: 75px; position: relative; text-align: center; background-color: #fafafa; } #more-nav{ left: 0px; top: 50px; } #logo{ margin-top: 10px; } #content, #all-posts{ width: 92%; padding: 4%; } .image-wrapper{ width: 100%; } .image-wrapper img, .post div img, .post p img{ max-width: 100% !important; padding: 15px 0px !important; margin: 20px 0px 20px 0px !important; border-right: 0px; border-left: 0px; } .single-post .title{ font-size: 1.4em; } .date{ display: none; } h1{ font-size: 1.7em; width: 94%; padding: 3%; } h2{ font-size: 1.50em; margin: 30px 0px 30px 0px; line-height: 1.75em; } h3{ font-size: 1.30em; } blockquote{ margin: 0px 0px 20px 0px !important; } pre{ margin-left: 0px !important; margin-right: 0px !important; width: 90%; overflow-x: scroll; } code{ width: 100%; font-size: 13px !important; } footer div{ display: inline; } /* Hire me responsive */ #hire ul{ padding-left: 15px; } #talking-img{ width: 100%; } #talking-img img{ width: 100% !important; } #reviews{ border-top: 1px dashed #e6e6e6; padding: 15px 0px 15px 0px; } #references_logo{ padding: 0px 0px 15px 0px; } .review{ width: 100%; margin: 0px 0px 15px 0px; padding: 0px; border-bottom: 1px dashed #e6e6e6; } #references_logo img, #references_logo .minor{ width: 22%; float: left; margin: 15px 2% 15px 0px; } .data_table th, .data_table td{ font-size: 8px; padding: 0px; border: 1px solid #efefef; } } /* CONVERSATION */ #post-conversation blockquote{ color: rgb(84, 84, 84); font-style: normal; margin: 20px 40px; } #post-conversation blockquote p{ margin: 10px 20px !important; } #post-conversation blockquote .dpm{ color: #3B9E2E !important; font-family: 'Open Sans', sans-serif; font-size: 13px; } #post-conversation blockquote .ddev{ color: #AD34CF !important; font-family: 'Open Sans', sans-serif; font-size: 13px; } #post-conversation blockquote .dcto{ color: #9E2E2E !important; font-family: 'Open Sans', sans-serif; font-size: 13px; } /* STATUS */ .status { background-color: #fff; padding: 40px; border: 1px solid #dba9a9; border-radius: 5px; margin: 40px 0px; } .status_text_content { font-size: 22px; line-height: 32px; } .status_text_content p { text-align: start !important; } .status_date { } .status_date a { color: #858585; text-decoration: none; } .status_images { margin: 20px auto; text-align: center; } .status_images img { max-width: 85%; max-height: 500px; } /* PAGINATION */ .pagination { text-align: center; margin-bottom: 40px; } .pagination a { color: #353535; } .page_number { display: inline-block; width: 130px; } </style> </head> <body> <div id="gradient"></div> <header> <div id="logo"> <a id='logo1' href="/">marcgg</a> <span id='logo2'>#</span> <a id='logo3' href="/blog/"> blog </a> </div> <div id="more-nav"> &rarr; <a href="/blog/" class="selected">blog</a> &rarr; <a href="/status/" class="">status</a> &rarr; <a href="/books/" class="">books</a> &rarr; <a href="/hire/" class="">hire me</a> </div> </header> <h1> <span> The Risks of Working With Another Company's API </span> </h1> <div class="published"> <span>24 September 2012</span> </div> <div id="container"> <div id="content"> <div class="post" id="post-"> <p>Before we begin let me give you a little background on why Iâ€™m writing this article.</p> <p>Iâ€™ve been working with the Facebook platform for almost 3 years now. I also wrote code using the APIs provided by Twitter, Instagram, Flickr, Google, Foursquare, Amazon, Youtube, Spotify and others. Iâ€™ve participated in building products like the <a href="http://www.tigerlilyapps.com/conversation">Tigerlily Conversation Suite</a> or <a href="http://ffocused.com">ffocused</a>, both heavily relying on some of those API. In the process I learned a lot on how to handle these services, their evolutions and their problems.</p> <p>This post is nothing but my point of view and advices to people wanting to build on top of an existing platform. I donâ€™t know everything, I just know the problems Iâ€™ve encountered, how I delt with them and how I avoided them afterward.</p> <p>Thatâ€™s all for disclaimer, letâ€™s dig in.</p> <h2 id="being-cautious-the-real-cost-of-a-feature">Being Cautious: The Real Cost of a Feature</h2> <p>The main thing I learned in the process is that you have to be very cautious in how you start using a new API. When you discover all the possibilities for the first time, you just want to jump in and create something. The catch is that everything might not be as bright as it seems.</p> <p>Some features may be buggy while others are deprecated. Iâ€™m not saying that they often are, just that they might be. You should consider the fact that everything will not go as planed and that this is going to have a cost.</p> <p>Itâ€™s all about understanding that <a href="http://gettingreal.37signals.com/ch05_Start_With_No.php">the real cost of the feature</a> is not the time itâ€™s going to take to develop it. You also have to take into account the time youâ€™re going to spend maintaining it, and the friction itâ€™s going to have with other components of your system. I like how <a href="https://twitter.com/tenderlove">Aaron Patterson</a> describes this feeling as the lower tolerance for technical debt experienced developers have.</p> <div style="width:560px; margin: auto"> <object width="560" height="315"><param name="movie" value="http://www.youtube.com/v/8kSfGgiFk48?version=3&amp;hl=fr_FR&amp;rel=0&amp;start=1075" />&lt;/param&gt;<param name="allowFullScreen" value="true" />&lt;/param&gt;<param name="allowscriptaccess" value="always" />&lt;/param&gt;<embed src="http://www.youtube.com/v/8kSfGgiFk48?version=3&amp;hl=fr_FR&amp;rel=0&amp;start=1075" type="application/x-shockwave-flash" width="560" height="315" allowscriptaccess="always" allowfullscreen="true" />&lt;/embed&gt;</object> </div> <p>Letâ€™s say you want to add a Facebook or Twitter connect to your website. Implementing it is <a href="http://developers.facebook.com/docs/guides/web/#login">dead simple</a>â€¦ but what if Facebook is down for a while, or if it glitches out and your users canâ€™t log in? What if they totally revamp their login system and this time it takes months to fix it? What if you want to handle users in a specific way and this connect feature is now getting in the way?</p> <p>You have to evaluate if itâ€™s worth the risk of delegating a part of your system to another company. Sometimes it can be the best move you can make, but it can also be a mistake that will cost you precious time.</p> <p>I sometimes think of it like AJAX at the beginning of the Â«web 2.0Â» era. Everyone started creating full AJAX websites because the possibilities were so amazing. For some it was great, but in other cases it was very gimmicky, didnâ€™t provide any real end-user value and had terrible issues in term of maintenance.</p> <h2 id="its-not-as-simple-as-you-might-think">Itâ€™s Not As Simple As You Might Think</h2> <p>Thinking about connecting to an API as something trivial can only work for a small side project or a minor feature.</p> <p>If you want to build a company around a platform, satisfy customers and make money with it thatâ€™s when it becomes complex. The simplest example I can give you is rate limitations. This alone could kill a project or at least diminish its value enough to render it useless.</p> <p>Stop thinking that youâ€™ll be able to scrap the entire data on Twitter and provide amazing analytics just by having a couple of crons running on a small server. Itâ€™s not going to work because itâ€™s not going to <a href="http://www.youtube.com/watch?v=b2F-DItXtZs">scale</a>.</p> <p>My advice would to have a clear focused vision on where you can provide a real value and keep it realistic. Basing your product on an amazing platform is a great opportunity weâ€™re given, but it should not be seen as the golden hammer of product design.</p> <h2 id="things-will-change">Things Will Change</h2> <p><img src="/assets/misc/fbml.jpg" style="float:right; width:210px;" /></p> <p>Any third party API youâ€™re going to use is going to change. Itâ€™s a good thing. You want it to provide more features, to adapt to follow the best practices and so on. The real question here is not Â«Is it going to change ?Â» - because it will, but Â«Is my system and product flexible enough to handle the changes ?Â».</p> <p>First, if you base your entire product on one API feature, you are taking huge risks. The company providing the service might just turn it off at any pointâ€¦ just ask the people that were building on top of the <a href="http://googlecode.blogspot.fr/2011/05/spring-cleaning-for-some-of-our-apis.html">Google Translate API</a>, creating <a href="http://developers.facebook.com/blog/post/568/">only FBML applications</a> or building a <a href="http://thenextweb.com/twitter/2012/08/17/twitter-4/">Twitter client</a>.</p> <p>Secondly, your code needs to be separated enough so that a change in the third party API only impacts a minimal part of your system. This is where you really have to follow <a href="http://en.wikipedia.org/wiki/Law_of_Demeter">Demeterâ€™s law</a>. Simply put, have a good interface somewhere that allows you to limit the number of places in which you have API handling code.</p> <h2 id="things-will-break">Things Will Break</h2> <p><img src="/assets/misc/movefast.png" style="float:right; width:210px;" /></p> <p>Iâ€™ve reported over 200 bugs on the Facebook platform. Some were fixed, some were impossible to reproduce accurately and other were just disregarded because considered as weird edge cases.</p> <p>This is not surprising, an API is not an all knowing oracle! Itâ€™s software and software breaksâ€¦ especially within <a href="http://startupquote.com/post/1624569753">startups moving fast</a>. I canâ€™t imagine how complex maintaining a platform such as Facebook or Twitter can be, but Iâ€™m sure that the engineers behind it, as talented as they are, will let bugs slip.</p> <p>These bugs are not the same as a glitch in your system. You canâ€™t fix them yourself. The only you can do and thatâ€™s having a system that is resilient to these API failures.</p> <p>Maybe you think that itâ€™s as easy as when thereâ€™s a crash due to a bad API call, rescue the exception and use the response code to give a nicely formatted error to the end user. Sometimes it is just that, but let me ask you this. What if :</p> <ul> <li>There is no error code or it is not the correct one</li> <li>The response is <a href="http://developers.facebook.com/bugs/349799231758647">corrupted</a> (bad formatting, bad charset, incompleteness)</li> <li>The response seems correct but has no sense (Â«Q: Whatâ€™s the userâ€™s age? A: JohnÂ»)</li> <li>The response is correct but the action hasnâ€™t be made</li> </ul> <p>You should handle some of these situations depending on the level of stability you want to achieve. Obviously if itâ€™s something that is not important, do not waste your time trying to make it bullet proof. Put the time and effort into it if itâ€™s a critical part of your application.</p> <h2 id="example-scaling-a-quick-facebook-comments-fetching-system-with-no-data-loss">Example: Scaling a Quick Facebook Comments Fetching System With No Data Loss</h2> <p>One of the applications I work on needed to get all the comments left on a given Facebook page. The system would then take the comments and process them in a way that would add value for the community managers using the app. It was crucial that we got 100% of the comments in a timely fashion.</p> <p>At first we wanted to get all the posts and process them in batches using the <a href="http://developers.facebook.com/docs/reference/api/batch/">Batch API</a>, but at the time this API was very unstable. We tried processing all posts independently in one big routine and this quickly showed its limit as some API calls will time out, impacting the fetching of others comments that were left waiting. Adding a queuing system and ways to retry a given job solved that issue.</p> <p>We then discovered that Facebook has an undocumented limit of ~800 comments per call. Asking for more will not return an error but a random number of comments. We changed the system to take smaller batches of comments and use Facebook pagination system. The bad news is that it would sometimes glitch and results in an <a href="http://developers.facebook.com/bugs/127681480703469">infinite loop</a>. Some other times everything will seem fine but some comments would be missing for unknown reasons.</p> <p>The solution here was to create methods able to determine if the comments returned were valid or not and decide when to stop fetching.</p> <p>As you can see, the first approach Â«gimme all of them commentsÂ» does not work when you deal with <a href="http://developers.facebook.com/bugs/438731489482335">large amounts</a> of <a href="http://developers.facebook.com/bugs/389080567815236">items</a>. This might not be a problem for most people building apps dealing with only a couple dozens of comments, but our product target big brands with a crazy amount of user interactions. Therefore it was very important that we got it right as it was at the core of what we were trying to achieve. The time and effort spent into building a fetching system that would work as good as possible had a real value so it was a wise choice to do it that way.</p> <p>Itâ€™s all about knowing what youâ€™re trying to do and how good you need it to be. Sometimes good enough is what you shoot for, but in other cases you need something thatâ€™s as flawless as you can get. What you donâ€™t want is to realize that this simple API call turned into months of unplanned development.</p> <h2 id="as-a-developer">As A Developer</h2> <p>Developing systems relying heavily on APIs you donâ€™t control requires a lot of <a href="http://en.wikipedia.org/wiki/Defensive_programming">discipline</a>. You have to make a lot of assumptions about what the other companyâ€™s going to do and be ready for random things to happen. Itâ€™s complicated and can be frustrating at times when you see features you build fall apart because of a change you have no control over.</p> <p>Of course itâ€™s not all grim or else I wouldnâ€™t have been crazy enough to do it for so long!</p> <p>Itâ€™s an interesting challenge to build something able to overcome all these problems and provide real value despite it. Personally it allowed me to learn a lot, tackle complex problems and grow as a developer. Itâ€™s also great to have a dataset as huge as Twitter or Facebook to put into your system. Everything seems to be at a larger scale right away and the possibilities from a product perspective are broaden.</p> <p>Finaly Iâ€™ll add that this is a good learning experience for when you get to the point where you need to build your own APIâ€¦ because everyone wants to build a cool API! Youâ€™ve seen how itâ€™s done, the mistakes made, the good ideas, the architecture behind itâ€¦</p> <p>I can safely say that <a href="http://www.sethcall.com/blog/2010/09/30/facebook-api-does-not-care/">it will be infuriating</a> at times, but within a focused and understanding team, itâ€™s all manageable and the result can be awesome.</p> <div id="more"> <div id="more-articles"> <p>Since you scrolled this far, you might be interested in some other things I wrote:</p> <ul> <li><a href="/blog/2020/11/12/building-boxing-mobile-app-swiftui/">Building, Releasing and Marketing an iOS Fitness App</a></li> <li><a href="/books/">Startup & Tech Book Reviews</a> </ul> </div> <div class="container comments" id="comments"> Loading comments... </div> <div id="comment_form_wrapper" class="container"> <form id="comment_form"> <textarea name="content" required id="comment_content" placeholder="Leave a comment"/></textarea /> <div id="comment_additional" class="row" style="display: none;"> <div class="col-sm-4"> <input type="text" id="comment_name" required placeholder="Your name*" /> </div> <div class="col-sm-4"> <input type="text" id="comment_website" placeholder="Your site" /> </div> <div class="col-sm-4"> <input type="email" id="comment_email" required placeholder="Your email* (won't be displayed)" /> </div> </div> <br /> <input type="submit" id="submit_comment" value="Send"/> <div id="submit_loading" style="display: none;">...</div> </form> </div> </div> </div> </div> </div> <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script> <script src="/assets/js/comments.js"></script> <link rel="preload" href="/assets/css/code.css" as="style" onload="this.rel='stylesheet'"> <link href="/assets/css/comments.css?body=1" rel="stylesheet" type="text/css" media="all"> <script> /*! loadCSS. [c]2017 Filament Group, Inc. MIT License */ !function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this); /*! loadCSS rel=preload polyfill. [c]2017 Filament Group, Inc. MIT License */ !function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this); </script> <footer> <div>Website powered by <a href="https://github.com/jekyll/jekyll">Jekyll</a>, hosted on <a href="https://github.com/marcgg/marcgg.github.com">Github</a>. <br> All of the <a href="/blog">blog's articles</a>, <a href="/status">status</a> and site content in general is under Copyright &copy;. <br> If you want to use this content, please contact me.</div> </footer> <script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-31071519-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script> </body> </html>

