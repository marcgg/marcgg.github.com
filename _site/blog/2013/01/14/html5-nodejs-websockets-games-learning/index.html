<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>
      2 Days Trying To Create a Multiplayer HTML5 Game
        </title>
    <meta name="description" content="I'm not a game developer at all, so in order to see the problems linked to creating a multiplayer game I decided to create a prototype with NodeJS, Websockets and HTML5.">
    <meta name="author" content="Marc G Gauthier">
    <meta content='user-scalable=no, width=device-width, initial-scale=1.0' name='viewport'>
    <meta name="google-site-verification" content="x2EpQdOMz-k9fP8hak9I3COaXhnQ4jNLp2GU4GYQ8jM" />

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@marcgg">
    <meta name="twitter:creator" content="@marcgg">

    <meta name="twitter:title" content="2 Days Trying To Create a Multiplayer HTML5 Game">
      <meta name="twitter:description" content="I'm not a game developer at all, so in order to see the problems linked to creating a multiplayer game I decided to create a prototype with NodeJS, Websockets and HTML5.">
      
        <meta name="twitter:image" content="https://marcgg.com/assets/previews/2013-01-14-html5-nodejs-websockets-games-learning.jpg" />
        <meta name="image" property="og:image" content="https://marcgg.com/assets/previews/2013-01-14-html5-nodejs-websockets-games-learning.jpg" />
      <link href='//fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic|Open+Sans:300italic,700italic,400,700,300' rel='stylesheet' type='text/css'>
    <link href="/atom/blog.xml" rel="alternate" type="application/atom+xml" title="marcgg#blog">
    <link href="/atom/status.xml" rel="alternate" type="application/atom+xml" title="marcgg#status">
    <link rel="shortcut icon" href="/assets/favicon.png">
    <style type="text/css">
      /* http://meyerweb.com/eric/tools/css/reset/ 
   v2.0 | 20110126
   License: none (public domain)
*/

html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed, 
figure, figcaption, footer, header, hgroup, 
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
	margin: 0;
	padding: 0;
	border: 0;
	font-size: 100%;
	font: inherit;
	vertical-align: baseline;
}
/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure, 
footer, header, hgroup, menu, nav, section {
	display: block;
}
body {
	line-height: 1;
}
ol, ul {
	list-style: none;
}
blockquote, q {
	quotes: none;
}
blockquote:before, blockquote:after,
q:before, q:after {
	content: '';
	content: none;
}
table {
	border-collapse: collapse;
	border-spacing: 0;
}

.clearfix:after {
	content: ".";
	display: block;
	clear: both;
	visibility: hidden;
	line-height: 0;
	height: 0;
}
 
.clearfix {
	display: inline-block;
}
 
html[xmlns] .clearfix {
	display: block;
}
 
* html .clearfix {
	height: 1%;
}

      @font-face {
    font-family: 'anonymousregular';
    src: url('/assets/fonts/Anonymous-webfont.eot');
    src: url('/assets/fonts/Anonymous-webfont.eot?#iefix') format('embedded-opentype'),
         url('/assets/fonts/Anonymous-webfont.woff') format('woff'),
         url('/assets/fonts/Anonymous-webfont.ttf') format('truetype'),
         url('/assets/fonts/Anonymous-webfont.svg#anonymousregular') format('svg');
    font-weight: normal;
    font-style: normal;

}

body{
  font-size: 15px;
  font-family: 'Droid Serif', serif;
  color: #353535;
  line-height: 25px;
}

#gradient{
  height: 5px;
  background: rgba(237,82,82,0.64);
  background: -moz-linear-gradient(left, rgba(237,82,82,0.64) 0%, rgba(250,21,0,0.65) 20%, rgba(237,82,82,0.66) 52%, rgba(255,21,0,0.66) 80%, rgba(237,82,82,0.67) 100%);
  background: -webkit-gradient(left top, right top, color-stop(0%, rgba(237,82,82,0.64)), color-stop(20%, rgba(250,21,0,0.65)), color-stop(52%, rgba(237,82,82,0.66)), color-stop(80%, rgba(255,21,0,0.66)), color-stop(100%, rgba(237,82,82,0.67)));
  background: -webkit-linear-gradient(left, rgba(237,82,82,0.64) 0%, rgba(250,21,0,0.65) 20%, rgba(237,82,82,0.66) 52%, rgba(255,21,0,0.66) 80%, rgba(237,82,82,0.67) 100%);
  background: -o-linear-gradient(left, rgba(237,82,82,0.64) 0%, rgba(250,21,0,0.65) 20%, rgba(237,82,82,0.66) 52%, rgba(255,21,0,0.66) 80%, rgba(237,82,82,0.67) 100%);
  background: -ms-linear-gradient(left, rgba(237,82,82,0.64) 0%, rgba(250,21,0,0.65) 20%, rgba(237,82,82,0.66) 52%, rgba(255,21,0,0.66) 80%, rgba(237,82,82,0.67) 100%);
  background: linear-gradient(to right, rgba(237,82,82,0.64) 0%, rgba(250,21,0,0.65) 20%, rgba(237,82,82,0.66) 52%, rgba(255,21,0,0.66) 80%, rgba(237,82,82,0.67) 100%);
  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ed5252', endColorstr='#ed5252', GradientType=1 );
}

/* STRUCTURE */

#container{
  background-color: #fafafa;
}

#content{
  width: 760px;
  margin: auto;
  margin-top: 40px;
  padding-bottom: 60px;
  padding-top: 40px;
}

/* FOOTER */
footer{
  padding: 40px 0px;
  text-align: center;
  border-top: 1px solid #e6e6e6;
  font-size: 0.8em;
  color: #9a9a9a;
  background-color: #fafafa;
}
footer a{
  color: #9a9a9a;
}

/* HEADER */

header{
  width: 760px;
  margin: auto;
  height: 50px;
  border-bottom: 1px solid #f1f1f1;
  position: relative;
}
#more-nav{
  font-size: 0.75em;
  display: inline-block;
  position: absolute;
  top: 0px;
  font-family: "anonymousregular";
  padding-top: 5px;
  right: 0px;
}
#more-nav a{
  padding: 0px 2px;
  text-decoration: none;
  color: #353535;
}
#more-nav a:hover{
  transition: 0s;
  background-image: linear-gradient(to bottom, #fff 30%, rgba(200, 200, 200, 0.4) 50%);
  background-repeat: repeat-x;
  background-size: 2px 2px;
  background-position: 0px 100%;
}

#more-nav .selected{
  color: #ed5252;
  font-weight: bold;
}

#logo{
  font-size: 1.2em;
  font-family: "anonymousregular";
  margin-top: 20px;
}
#logo *{
  text-decoration: none;
}
#logo1{
  color: #999;
}
#logo2{
  font-size: 0.8em;
  color: #ed5252;
}
#logo3{
  color: #353535;
}
#logo a:hover{
  color: #ed5252;
  transition-duration: 1s;
}

/* TEXT STRUCTURE */

h1, h2, h3, h4, h5{
  font-family: 'Open Sans', sans-serif;
  color: #1c1c1c;
}

a:hover{
  color: #ed5252;
  transition-duration:0.2s;
}

p a, ul a, .review a{
  color: #763232;
  text-decoration: none;
  background-image: linear-gradient(to bottom, #fff 30%, rgba(200, 200, 200, 0.4) 50%);
  background-repeat: repeat-x;
  background-size: 2px 2px;
  background-position: 0px 100%;
}

.homepage a{
  color: #353535;
}

p{
  text-align: justify;
  margin-bottom: 20px;
}

.excerpt p{
  margin-bottom: 0px;
}

.footnote, .sidenote{
  margin: 40px 0px;
  color: #858585;
  text-align: right;
  font-size: 0.9em;
  font-style: italic;
}

.image_notes{
  text-align: center;
  color: #858585;
  font-size: 0.9em;
  margin: -5px 0px 15px 0px;
}

h1{
  font-size: 2.45em;
  text-align: center;
  margin: 70px 0px 20px 0px;
  line-height : 1.5em;
}

h1 em{
  color: #888;
  font-weight: normal;
  font-size: 0.8em;
}

h2{
  font-size: 1.75em;
  margin: 50px 0px 50px 0px;
  line-height: 1.75em;
}
h2::before{
  content: "#";
  color: #ed5252;
  font-family: "anonymousregular";
  display: inline-block;
  float: left;
  padding: 3px 10px 0px 0px;
  font-size: 0.7em;
}

h3{
  font-size: 1.35em;
  margin-bottom: 20px;
}
h4{
  font-size: 1.2em;
  margin-bottom: 20px;
  font-style: italic;
}

h5{
  font-size: 1.3em;
  margin-bottom: 20px;
}

h5 *{
  color: #353535;
}

em{
  font-style: italic;
}
strong{
  font-weight: bold;
}

blockquote{
  border-left: 3px solid #ddd;
  color: #888;
  margin: 0px 0px 20px 40px;
  font-style: italic;
}

blockquote p{
  margin: 5px 20px !important;
}


ul{
  padding-left: 40px;
  line-height: 25px;
  list-style: square;
  margin-bottom: 20px;
}
li{
  display: list-item;
}

ol{
  padding-left: 40px;
  line-height: 25px;
  margin-bottom: 20px;
  list-style-type: decimal;
}
/* TAGS */

.home-tag {
  font-size: 10px;
  display: inline-block;
  border: 1px solid #dedede;
  padding: 2px 2px 1px 2px;
  border-radius: 2px;
  line-height: 10px;
  margin-left: 1px;
}

.tag-date{ color: #aaa; }

.tag-management         { border-color: #929aff; color: #929aff; }
.tag-programming        { border-color: #ff9292; color: #ff9292; }
.tag-coaching           { border-color: #4ec698; color: #4ec698; }
.tag-projectmanagement  { border-color: #929aff; color: #929aff; }

/* BLOG INDEX */
#all-posts{
  margin: 0px auto 10px auto;
  width: 760px;
}

.single-post{
  border-top: 1px solid #f1f1f1;
  padding: 40px 0px;
  float: clear;
}
.single-post:first-child{
  border-top: none !important;
}

.single-post .date{
  color: #cdcdcd;
  margin-top: 10px;
  float: right;
}

.single-post .author{
  color: #cdcdcd;
  float: right;
  font-size: 0.7em;
}

.single-post .title{
  font-family: 'Open Sans', sans-serif;
  font-size: 1.6em;
  margin-bottom: 20px;
  line-height: 1.6em;
  position: relative;
}
.single-post .title a{
  color: #353535;
  text-decoration: none;
}

.single-post .title a::before{
  content: "→";
  opacity: 0;
  font-family: "anonymousregular";
  font-size: 0.7em;
  position: absolute;
  left: -30px;
  transition: all .4s ease-in-out;
}

.single-post .title a:hover::before{
  opacity: 1;
  transition: all .4s ease-in-out;
  color: #ed5252;
}

.single-post .title em{
  display: none;
}

.data_table{
  border: 1px solid #efefef;
  font-family: "anonymousregular";
  font-size: 12px;
  margin: auto auto 20px auto;
}
.data_table tr{
  border: 1px solid #efefef;
}
.data_table th{
  background-color: #efefef;
}
.data_table th, .data_table td{
  padding: 2px 5px;
}

.post table {
  margin: 0px auto 20px auto;
  border: 1px solid #dedede;
}

.post td {
  padding: 5px 10px;
}

/* BOOKS */
.book-cover-entry{
  width: 120px;
  margin-right: 20px;
  float: left;
  font-size: 12px;
  text-decoration: none !important;
}
.buy-book{
  text-decoration: underline;
}
.book-cover-entry img{
  width: 120px;
}
.book-cover-entry {
  background-image: none;
}

.book-rating .icon {
  display: inline-block;
  padding-right: 5px;
}
.book-rating .top .icon{ color: #1CED00; }
.book-rating .good .icon{ color: #82ED00; }
.book-rating .medium .icon{ color: #EDD100; }
.book-rating .low .icon{ color: #EDAE00; }
.book-rating .poor .icon{ color: #ED3B00; }

#buy-title{
  padding: 0px 0px 25px 0px;
}
#buy-title span{
  font-size: 0.8em !important;
  color: #cdcdcd;
}
#buy-popin{
  padding: 30px 15px;
}

.store{
  display: block;
  padding: 15px 5px;
  text-decoration: none;
}

.store:hover{
  color: #ed5252;
}

#upcoming-books{
  padding-top: 20px;
}
#upcoming-books img{
  height: 90px;
  margin-right: 10px;
  border: 1px solid #fff;
}

#upcoming-books a{
  text-decoration: none;
}
#upcoming-books img:hover{
  border: 1px solid #ed5252;
}

/* BLOG SHOW */

.post{
}
p code, li code{
  background-color: #efefef;
  font-family: "Lucida Console", "Courier New", Courier, monospace;
  padding: 1px 2px;
  font-size: 13px;
}
.post img{
  border: 1px solid #e6e6e6;
  padding: 5px;
  margin: 0px 0px 20px 20px;
}

.published span{
  border-top: 1px solid #e6e6e6;
  display: inline-block;
  color: #858585;
  padding-top: 5px;
  font-family: 'Open Sans', sans-serif;
  font-size: 0.9em;
  padding: 5px 20px 0px 20px;
}
.published{
  text-align: center;
  margin-bottom: 65px;
}

#more{
  border-top: 1px solid #e6e6e6;
  margin-top: 40px;
  padding: 40px 0px;
}

#more-articles{
  margin-bottom: 40px;
}

.image-wrapper em{
  display: block;
  font-size: 0.8em;
  margin: -20px 0px 20px 0px;
  color: #aaa;
}
.image-wrapper em a{
  color: #aaa;
}

.twitter-tweet{
  margin: auto;
  max-width: 420px !important;
}

#intro_blurb{
  border: 1px dashed #dedede;
  padding: 20px;
  margin: 20px 0px;
  opacity: 0.7;
}

#intro_blurb a{
  color: #763232;
}


/* Music */

.js_play_sound, .js_stop_sound{
  display: inline-block;
  padding: 4px 10px 2px 10px;
  border: 1px solid #efefef;
  background-color: #efefef;
  margin-right: 10px;
  text-decoration: none;
  border-radius: 3px;
  font-family: 'anonymousregular';
  font-size: 12px;
}

.js_play_sound:hover, .js_stop_sound:hover{
  background-color: #dedede;
}

/* Comments */

#comments{
  padding-top: 20px;
}

#show-disqus-arrow{
  color: #ed5252;
}

/* CLEARFIX */
.cf:before,
.cf:after {
    content: " "; /* 1 */
    display: table; /* 2 */
}

.cf:after {
    clear: both;
}


/************************ MOBILE LAYOUT *********************/
@media all and (max-width: 800px) {

  .home-tag {
    display: none;
  }

  .author{
    float: none !important;
    display: inline;
  }

  header{
    width: 92%;
    padding: 4%;
    height: 75px;
    position: relative;
    text-align: center;
    background-color: #fafafa;
  }
  #more-nav{
    left: 0px;
    top: 50px;
  }
  #logo{
    margin-top: 10px;
  }

  #content, #all-posts{
    width: 92%;
    padding: 4%;
  }
  .image-wrapper{
    width: 100%;
  }
  .image-wrapper img, .post div img, .post p img{
    max-width: 100% !important;
    padding: 15px 0px !important;
    margin: 20px 0px 20px 0px !important;
    border-right: 0px;
    border-left: 0px;
  }

  .single-post .title{
    font-size: 1.4em;
  }

  .date{
    display: none;
  }
  h1{
    font-size: 1.7em;
    width: 94%;
    padding: 3%;
  }
  h2{
    font-size: 1.50em;
    margin: 30px 0px 30px 0px;
    line-height: 1.75em;
  }

  h3{
    font-size: 1.30em;
  }
  blockquote{
    margin: 0px 0px 20px 0px !important;
  }
  pre{
    margin-left: 0px !important;
    margin-right: 0px !important;
    width: 90%;
    overflow-x: scroll;
  }
  code{
    width: 100%;
    font-size: 13px !important;
  }
  footer div{
    display: inline;
  }

  /* Hire me responsive */
  #hire ul{
    padding-left: 15px;
  }
  #talking-img{
    width: 100%;
  }
  #talking-img img{
    width: 100% !important;
  }
  #reviews{
    border-top: 1px dashed #e6e6e6;
    padding: 15px 0px 15px 0px;
  }

  #references_logo{
    padding: 0px 0px 15px 0px;
  }

  .review{
    width: 100%;
    margin: 0px 0px 15px 0px;
    padding: 0px;
    border-bottom: 1px dashed #e6e6e6;
  }
  #references_logo img, #references_logo .minor{
    width: 22%;
    float: left;
    margin: 15px 2% 15px 0px;
  }

  .data_table th, .data_table td{
    font-size: 8px;
    padding: 0px;
    border: 1px solid #efefef;
  }
}


/* CONVERSATION */

#post-conversation blockquote{
  color: rgb(84, 84, 84);
  font-style: normal;
  margin: 20px 40px;
}
#post-conversation blockquote p{
  margin: 10px 20px !important;
}
#post-conversation blockquote .dpm{
  color: #3B9E2E !important;
  font-family: 'Open Sans', sans-serif;
  font-size: 13px;
}
#post-conversation blockquote .ddev{
  color: #AD34CF !important;
  font-family: 'Open Sans', sans-serif;
  font-size: 13px;
}
#post-conversation blockquote .dcto{
  color: #9E2E2E !important;
  font-family: 'Open Sans', sans-serif;
  font-size: 13px;
}

/* STATUS */

.status {
  background-color: #fff;
  padding: 40px;
  border: 1px solid #dba9a9;
  border-radius: 5px;
  margin: 40px 0px;
}

.status_text_content {
  font-size: 18px;
  line-height: 24px;
}

.status_text_content p {
  text-align: start !important;
}

.status_date {

}

.status_date a {
  color: #858585;
  text-decoration: none;
}

.status_images {
  margin: 20px auto;
  text-align: center;
}

.status_images img {
  max-width: 85%;
  max-height: 500px;
}

.side_note {
  color: #aaa;
  margin-bottom: 42px;
  text-align: center;
}

.side_note a{
  color: #aaa;
}

.image_300 {
  width: 300px;
}

    </style>
  </head>

  <body>

    <div id="gradient"></div>
    <header>

      <div id="logo">
        <a id='logo1' href="/">marcgg</a>
        <span id='logo2'>#</span>
        <a id='logo3' href="/blog/">
          blog
        </a>
      </div>
      <div id="more-nav">
        &rarr; <a href="/blog/" class="selected">blog</a>
        &rarr; <a href="/status/" class="">status</a>
        &rarr; <a href="/books/" class="">books</a>
        &rarr; <a href="/hire/" class="">hire me</a>
      </div>
    </header>

    <h1>
  <span>
    2 Days Trying To Create a Multiplayer HTML5 Game
    
  </span>
</h1>


<div class="published">
  <span>14 January 2013</span>
</div>

<div id="container">
  <div id="content">
    <div class="post" id="post-">

      <p>Okay. Let’s start by saying that I’m a developer that does mostly web stuff.</p>

<p>This means that a majority of the code I write will end up displaying something in a browser.
Of course I do <a href="/2012/09/24/working-with-apis-facebook/">interact with APIs</a>, write background jobs, add some
security, optimize databases and so on… the point here is that, professionnally, I do not write
entire projects that have nothing to do with a web app.</p>

<p>My friend <a href="http://www.andreberlemont.com/portfolio/">André</a> on the other hand
has a different background as he mainly <a href="http://www.oneliferemains.com/">develops games</a>.
One evening we started talking about how complex it would be to create an online multiplayer
game from scratch. Being the web guy, I felt that I should know how all this was supposed to work… after
all, the multiplayer happens over the internet, right?</p>

<h2 id="i-can-code-that-with-my-eyes-closed">I Can Code That With My Eyes Closed…?</h2>

<p>On paper it seemed pretty simple.</p>

<p>People connect to a server.
This server keeps the game board and broadcasts it to everyone when
needed. Each player keeps some kind of state on its side for caching.
Everything related to drawing the game board as well as UI should be
handled by the client.</p>

<p>Of course I knew it couldn’t be that simple and I was 100% sure
I was disregarding most of the problems that can occur when creating an online game.</p>

<p>I <a href="/blog/2012/01/09/start-working-on-your-side-project/">already blogged</a> about how side projects are the best response to such
situation, therefore at that point I pretty much had to create some kind of game to try it out!</p>

<h2 id="stack">Stack</h2>

<p>Time being a factor, I didn’t want to go all out game development with C++, Unity or
something like that. Instead I kept it in my “safe” zone by using
technologies I had a bit of experience with:</p>

<ul>
  <li><a href="http://nodejs.org/">NodeJS</a> (for the server)</li>
  <li><a href="https://developer.mozilla.org/en-US/docs/HTML/Canvas/Tutorial">HTML5 Canvas</a> (to display the game board)</li>
  <li><a href="http://en.wikipedia.org/wiki/WebSocket">Websockets</a> with <a href="http://socket.io/">Socket.io</a> (to make it fast)</li>
</ul>

<p><img src="/assets/blog/stackgame.png" alt="logos" style="margin:20px auto; display: block" /></p>

<h2 id="building-the-game">Building The Game</h2>

<p>I wanted a simple game so that I could focus on the online aspect of it.
The rules I came up with are:</p>

<ul>
  <li>There are n players represented as squares on a board.</li>
  <li>1 player is the target and earns 1 point per 30 movements.</li>
  <li>If another player hits the target, she becomes the target and win 1 point.</li>
</ul>

<p>I also added a simplistic chat system so that players could talk
to one another during the game.</p>

<p>The first version of the multiplayer code was pretty simple:</p>

<ul>
  <li>When the player connects she gets the latest version of the game board.</li>
  <li>Each time the player moves it sends an event to the server that
updates the world and broadcasts it to everyone connected.</li>
  <li>Client side javascript renders the board in the canvas at each change.</li>
</ul>

<p>This is when I started to see why it wouldn’t be as simple.</p>

<h2 id="oh-wait-problems">Oh Wait. Problems.</h2>

<h3 id="speed">Speed</h3>

<p>My first version was hosted on Heroku and lagged like crazy. This is
because right now Heroku doesn’t support Websockets and forces socket.io
to fall back to its polling mode. After some <a href="https://github.com/joyent/node/wiki/Node-Hosting">research</a>
I moved to <a href="https://www.dotcloud.com/">DotCloud</a> and got an impressive boost in speed.</p>

<p>I also had to rewrite a lot of code using <a href="http://expressjs.com/">Express</a> because it would make
deployment way easier.</p>

<p><img src="/assets/blog/morestackgaming.png" alt="logos" style="margin:20px auto; display: block" /></p>

<p>Now that hosting and basic interactions were a bit more optimized, I started to see
another problem: passing around the whole board was still too costly
network-wise.</p>

<p>At that moment of development the board was just a JSON object containing
all the players, their names, positions, scores and other meta data
regarding the game. It seemed pretty small but it wasn’t, and as the
game would grow the problem would only get worse.</p>

<p>The solution here would be to only broadcast what changed instead of
redrawing everything. This was annoying because it meant that you need to be able
to draw the board from scratch (when you connect) as well as
incrementally (while you play). Twice the logic.</p>

<p>I also noticed a lag for the player’s own actions. This was because it
would always go via the server before updating the board. As a matter of
fact there wasn’t even a board on the client side, just its rendering
on the HTML5 Canvas.</p>

<p>Soooo to fix this the client code should also be able to know the state of the world
and update it locally.</p>

<h3 id="fun-gameplay--complexity">Fun, Gameplay &amp; Complexity</h3>

<p>A game needs to be fun, or else there is no point. And a couple of laggy
squares moving around is clearly not fun. This seems trivial, but when
you spend your time working on web apps, you don’t spend a lot of time thinking about
whether the app is fun or not. Making it efficient, fast and user friendly
is complicated enought!</p>

<p>I added some rules and gameplay elements to make it feel more like
something one would like to play, including:</p>

<ul>
  <li>Feedbacks when you get hit</li>
  <li>Scoreboards during game</li>
  <li>Invicibility frames when you get hit</li>
  <li>Board boundaries</li>
  <li>Changing a player’s name</li>
  <li>Tweaks in the player’s speed &amp; size</li>
</ul>

<p>It’s also good to know that some of the gameplay elements are based on constants.
For instance you always move of X, and your player is Y pixel-wide. When you get hit you
are invicible for Z frames and so on. To tweak it I had to add a debug
mode to change everything while playing to quickly see how it felt.</p>

<p>All these changes made my simple game complex and it became harder to maintain the code,
even only after something like 6 hours of work in.
I had to throw away a lot of code and start again fresh.</p>

<h3 id="concurent-access">Concurent Access</h3>

<p>When you have a lot of players connected and modifying the same board,
you’re bound to run into some <a href="http://en.wikipedia.org/wiki/Concurrency_control">concurent access</a> issues.
For instance let’s say two players touch the target at the same time.
Who gets +1 point?</p>

<p>To fix this I hacked together a basic
<a href="http://en.wikipedia.org/wiki/Mutual_exclusion">mutex</a> system
to handle the simple problems that kept on happening. This did the trick
after an hour of code, but it wasn’t something I’d put in production!</p>

<h2 id="conclusion">Conclusion</h2>

<p>Overall I’m pretty happy with the results.
Even with my lack of experience in the subject I still got
something running and gained a better grasp of why game developers
tremble when you mention online multiplayer.</p>

<p>Now I think the next step would be to design a game taking the
constraints discovered into account in order to simplify development. You don’t want a
game where precision and timing is key.
You could instead create a massively online turn-by-turn game and
save yourself major headaches while still producing something fun! It all
depends if you seek a technical challenge or if you just want to create
a cool project.</p>

<p>Also I’ll need to find a graphic designer because my game looked like shit, but
that’s another story.</p>

<p><img src="/assets/blog/screengame.png" alt="the game" style="margin:20px auto; display: block" /></p>



      <div id="more">
        <div id="more-articles">
          <p>Since you scrolled this far, you might be interested in some other things I wrote:</p>
            <ul>
              <li><a href="/blog/2021/04/04/game-devlogs-list/">13 Entertaining Game Devlog Youtube Channels</a></li>
            <li><a href="/blog/2015/07/01/game-of-life-gif/">Game of Life Visualisations</a></li>
            
              <li><a href="/books/">Startup & Tech Book Reviews</a>
            </ul>
          </div>

        <div class="container comments" id="comments">
          Loading comments...
        </div>

        <div id="comment_form_wrapper" class="container">
          <form id="comment_form">
            <textarea name="content" required id="comment_content" placeholder="Leave a comment"/></textarea />
            <div id="comment_additional" class="row" style="display: none;">
              <div class="col-sm-4">
                <input type="text" id="comment_name" required placeholder="Your name*" />
              </div>
              <div class="col-sm-4">
                <input type="text" id="comment_website" placeholder="Your site" />
              </div>
              <div class="col-sm-4">
                <input type="email" id="comment_email" required placeholder="Your email* (won't be displayed)" />
              </div>
            </div>
            <br />
            <input type="submit" id="submit_comment" value="Send"/>
            <div id="submit_loading" style="display: none;">...</div>
          </form>
        </div>

      </div>

    </div>

  </div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="/assets/js/comments.js"></script>

<link rel="preload" href="/assets/css/code.css" as="style" onload="this.rel='stylesheet'">
<link href="/assets/css/comments.css?body=1" rel="stylesheet" type="text/css" media="all">

<script>
/*! loadCSS. [c]2017 Filament Group, Inc. MIT License */
!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);
/*! loadCSS rel=preload polyfill. [c]2017 Filament Group, Inc. MIT License */
!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);
</script>


    <footer>
      <div>Website powered by <a href="https://github.com/jekyll/jekyll">Jekyll</a>, hosted on
      <a href="https://github.com/marcgg/marcgg.github.com">Github</a>.
      <br>
      All of the <a href="/blog">blog's articles</a>,
        <a href="/status">status</a>
        and site content in general is under
      Copyright &copy;.
      <br>
      If you want to use this content, please contact me.</div>
    </footer>
  </body>
</html>
